# 콕(KOK) | 빈 자리에 콕, 채우는 가능성

![슬라이드메인](https://github.com/user-attachments/assets/792e1f6c-ff5d-47e9-a301-cf6aaa0c1d32)

## 1. 프로젝트 소개
휴가나 공백으로 발생한 자리에서,  
단순한 대체 인력이 아닌 청년에게 실제 업무 환경을 경험할 수 있는 기회를 제공하는 서비스이다.  
경험을 중심으로 한 성장의 순환을 지향하며,  
업무의 공백을 기회로 바꾸고 사람의 가능성을 연결한다.

## 2. 개발 기간
2025.09.24 ~ 2025.10.20

## 3. 기획 배경

![슬라이드2](https://github.com/user-attachments/assets/3ea201b8-3b9e-43d1-944f-2f9aeadef5a7)

많은 청년들이 취업을 준비하면서도 실제 업무 환경을 경험할 기회가 부족하다.  
이로 인해 경력보다 경험이 중요한 시대에 ‘준비된 인재’로 성장하기 어렵다는 한계가 존재한다.  
**KOK**는 이러한 문제의식에서 출발했다.  
휴가나 공백으로 생긴 기업의 자리를 단순한 인력 대체가 아닌 청년의 실무 경험의 장으로 바꾸고자 했다.  

기업은 청년에게 실제 직무를 체험할 기회를 제공하고, 그 과정에서 자사의 문화와 일하는 방식을 자연스럽게 알린다.  
체험을 마친 청년은 평가를 통해 인턴으로 연계되며,  
기업은 그 과정을 통해 브랜딩과 인재 발굴 효과를 함께 얻는다.  

**KOK**는 청년에게는 경험의 기회, 기업에게는 브랜드의 기회,  
그리고 사회에는 연결의 가치를 만들어가는 플랫폼이다.

---

## 4. 기대효과

![슬라이드4](https://github.com/user-attachments/assets/a647b4d3-cfb7-4a85-9c57-1c42d991c067)

**청년에게 새로운 직무 체험 기회를 제공**

- 실제 기업의 업무 환경을 직접 경험하며, 자신에게 맞는 직무나 산업을 탐색할 수 있다.  
- 단순한 인턴십이 아닌 **‘업무 체험형 참여’**를 통해 일의 흐름과 조직 문화를 자연스럽게 이해한다.  
- 체험 이후 기업의 평가를 통해 인턴으로 연계될 수 있는 기회의 문이 열린다.
**기업의 브랜드 홍보 및 인재 연결 강화**

- 체험 프로그램을 통해 기업 문화를 외부에 자연스럽게 알리는 홍보 효과를 얻는다.  
- 청년층과의 긍정적인 접점을 통해 브랜드 신뢰도를 높인다.  
- 체험을 통해 기업에 관심을 가진 청년을 인턴이나 향후 채용으로 연결할 수 있다.  

**사회적 고용 연결 구조 형성**

- 공백 인력을 단순히 대체하는 것이 아니라, 청년의 경험 기회로 전환하여 상호 이익의 순환 구조를 만든다.  
- 기업, 청년, 사회가 함께 참여하는 새로운 형태의 고용 문화가 확산된다.  

---

## 5. 개발환경

- Java  
- Spring Security  
- Thymeleaf  
- QueryDSL  
- Spring Boot  
- HTML, CSS, JS  
- JDK 11.0.15  
- YAML  
- JSON  
- REST:API  
- IntelliJ IDEA  
- Git, GitHub  
- Lombok  
- Bootpay  
- Naver OAuth  
- Kakao OAuth  

---

## 6. ERD

![tbl_admin_notice-white](https://github.com/user-attachments/assets/7d9d3374-1d2e-4855-8d26-6eafa6c1ad6c)

---

## 7. 담당업무

### **프론트엔드**

▶ **체험 (PC, Mobile)**  
- 체험 목록  
- 체험 상세, 간편지원  

▶ **인턴 (PC, Mobile)**  
- 인턴 목록  
- 인턴 상세, 간편지원  

▶ **기업**  
- 기업목록  
- 기업홈  

![프론트 퍼블리싱 진행률](https://github.com/user-attachments/assets/8f99974a-0e9b-43a2-9a60-0ba40ff65c78)

---

### **백엔드**

▶ **기업 콘솔 메인**

- **체험 공고 집계**  
  - 기업별 등록된 체험 공고를 활성화, 비활성화 상태 기준으로 카운트하여 대시보드에 표시  

- **인턴 공고 집계**  
  - 기업별 등록된 인턴 공고를 활성화, 비활성화 상태 기준으로 카운트하여 대시보드에 표시  

- **체험자 리스트**  
  - 해당 기업의 체험 지원자 중 최근 체험을 완료한 인원을 조회  

---

▶ **기업 프로필 관리**

- **프로필 등록**  
  - 기업 기본정보(회사명, 대표자명, 산업분류, 기업 규모 등) 및 이미지(프로필/배경) 등록  
  - AWS S3를 이용한 이미지 업로드 및 URL 저장  

- **프로필 수정**  
  - 기존 기업 정보와 이미지 파일을 수정  
  - 파일 교체 시 기존 파일 삭제 후 새 URL로 업데이트  
  - Spring Cache 적용(`@CacheEvict`, `@Cacheable`)으로 조회 시 캐싱 및 수정 시 캐시 초기화 처리
▶ **기업 체험 공고**

- **체험 목록**  
  - `ExperienceNoticeStatusTask` 스케줄러를 통해 기간이 지난 공고는 자동으로 상태 변경  
  - 10개 단위 페이징 처리 (`Criteria` 클래스 이용)  
  - 검색 조건: 체험공고명, 직군명(`experience_job_category`)으로 필터링  
  - REST API 방식으로 데이터 전달 (`/api/enterprise-console/experience/list/{page}`)  
  - 삭제 시 실제 데이터 삭제가 아닌 `status`를 `INACTIVE`로 변경  
  - 모집 상태 토글 시 `ACTIVE ↔ INACTIVE`로 상태 실시간 전환  

- **체험 등록**  
  - 기업이 체험 공고를 등록할 수 있도록 Form 데이터를 수신  

- **체험 수정**  
  - 기존 공고를 `findDetailById`로 불러온 뒤 변경된 필드만 업데이트  

- **체험 지원자 목록**  
  - 기업별 체험 공고에 지원한 모든 지원자 리스트 조회  
  - 이력서 파일이 존재할 경우 다운로드 버튼 활성화 (여러 명일 경우 ZIP 파일로 묶어 다운로드)  

- **체험 지원자 상세**  
  - 지원 상태(`AWAIT`, `ACCEPT`, `REJECT`)별 필터링 가능  
  - 이력서 다운로드 버튼 클릭 시 AWS S3 URL을 발급받아 다운로드 처리  
▶ **기업 인턴 공고**

- **인턴 목록**  
  - `ExperienceNoticeStatusTask` 스케줄러를 통해 기간이 지난 공고는 자동으로 상태 변경  
  - 10개 단위 페이징 처리 (`Criteria` 클래스 이용)  
  - 검색 조건: 인턴공고명, 직군명(`intern_job_category`)으로 필터링  
  - REST API 방식으로 데이터 전달 (`/api/enterprise-console/intern/list/{page}`)  
  - 삭제 시 실제 데이터 삭제가 아닌 `status`를 `INACTIVE`로 변경  
  - 모집 상태 토글 시 `ACTIVE ↔ INACTIVE`로 상태 실시간 전환  

- **인턴 등록**  
  - 기업이 인턴 공고를 등록할 수 있도록 Form 데이터를 수신  

- **인턴 수정**  
  - 기존 공고를 `findDetailById`로 불러온 뒤 변경된 필드만 업데이트  

- **인턴 지원자 목록**  
  - 기업별 인턴 공고에 지원한 모든 지원자 리스트 조회  
  - 이력서 파일이 존재할 경우 다운로드 버튼 활성화 (여러 명일 경우 ZIP 파일로 묶어 다운로드)  

- **인턴 지원자 상세**  
  - 지원 상태(`AWAIT`, `ACCEPT`, `REJECT`)별 필터링 가능  
  - 이력서 다운로드 버튼 클릭 시 AWS S3 URL을 발급받아 다운로드 처리  

---

▶ **기업 광고**

- **광고 목록**  
  - 기업이 등록한 광고를 목록 형태로 조회  
  - 관리자 승인 상태에 따라 광고 게시 가능 (`ACTIVE ↔ INACTIVE`)  

- **광고 등록 (결제)**  
  - `Bootpay API`를 통한 결제 프로세스 구현  
  - 광고 배경 이미지 업로드 (S3) 및 광고기간 자동 계산  

- **광고 수정**  
  - 수정 시 기존 결제 내역은 유지하고 광고 정보만 업데이트  

---

▶ **기업 결제관리**

- **결제 목록**  
  - 기업별 결제 내역 조회  

---

![프론트 백엔드 진행률](https://github.com/user-attachments/assets/aafe8f75-c2c2-49af-a3a1-684bce05e791)
## 8. 트러블슈팅

---

### **필수값 누락으로 DB 삽입 실패**

**▶ 문제 상황**  
체험 공고 등록 기능을 구현하는 과정에서, 직군 선택을 하지 않은 상태로 등록 버튼을 누르면 DB `INSERT`가 실패하는 문제가 발생했다.  
오류 로그를 확인하니 `job_category` 값이 0으로 들어가며 문제를 일으키고 있었다.  
문제의 원인은 **기본 select 태그 대신 커스텀 UI로 구현된 직군 선택 기능**이었다.  
화면에서는 직군명이 바뀌어 사용자가 선택한 것처럼 보였지만, 실제 서버로 전송되는 값은 비어 있어 DB에서 오류가 발생했다.

![값 전달 오류 문제점1](https://github.com/user-attachments/assets/33601c36-0d42-4e74-904e-5c625ee39d8c)  
![값 전달 오류 문제점2](https://github.com/user-attachments/assets/b220a128-153a-4f44-9002-c4516e9df5bd)

**▶ 해결 방법**  
드롭다운에서 직군을 클릭하는 순간 해당 ID 값을 `hidden input`에 직접 넣어주도록 자바스크립트를 수정했다.  
또한 폼 제출 직전, 직군 선택 값이 유효한지 검증하여 값이 없으면 제출이 되지 않도록 방어 로직을 추가했다.  
이를 통해 커스텀 UI 사용 시 **“화면 표시”와 “전송 데이터”가 일치하는지 확인해야 한다**는 점을 명확히 인식하게 되었다.

![값 전달 오류 문제 해결1](https://github.com/user-attachments/assets/9b22daa0-3124-4cde-af6f-3581238eae16)  
![값 전달 오류 문제 해결2](https://github.com/user-attachments/assets/b4451cc2-5de0-4879-854a-9e083f7d0245)

---

### **insert, update 소통 부재로 인한 오류**

**▶ 문제 상황**  
기업 프로필 수정 기능에서, 정상 동작하던 `updateCompanySector()` 호출이突 “찾을 수 없다”는 오류를 발생시켰다.  
메서드가 존재함에도 오류가 난 이유는 **팀원의 로직 변경** 때문이었다.  
다른 팀원이 회원가입 시 기본 업종/규모 값을 자동 `INSERT`하도록 수정하면서, 기존에 값이 없는 상태에서 `INSERT`만 하던 로직이 충돌한 것이다.  
즉, 이미 값이 존재하는데 또다시 `INSERT`가 일어나며 제약 조건에 위배되었다.

![insert문제-소통의부재1](https://github.com/user-attachments/assets/3dd4ec09-d70d-4af0-88bb-e3f7763f2ccd)  
![insert문제-소통의부재2](https://github.com/user-attachments/assets/4e8fa94a-b699-49af-b189-3c8305d11efd)  
![insert문제-소통의부재3](https://github.com/user-attachments/assets/4b788c8a-9ee2-43cb-892d-1437766903f7)

**▶ 해결 방법**  
데이터 흐름을 처음부터 추적한 결과, 기본 `INSERT` 로직이 추가되어 중복이 발생한 것을 확인했다.  
이후 `INSERT` 대신 `UPDATE`로 수정하자 정상적으로 작동했다.  
이번 경험을 통해, **기술적 오류보다 협업 소통 누락이 더 큰 문제를 일으킬 수 있음**을 깨달았다.  
또한 데이터 생성부터 변경까지의 흐름을 완전히 이해해야 안정적인 시스템을 유지할 수 있다는 교훈을 얻었다.

![insert문제-소통의부재-문제해결](https://github.com/user-attachments/assets/7ff711c4-ed72-4463-bfae-0db0096c5f4a)

---

### **지원자 이력서 다중 다운로드 문제 - ZIP**

**▶ 문제 상황**  
여러 지원자의 이력서를 동시에 다운로드할 때, 첫 번째 파일만 다운로드되고 나머지는 차단되거나 새로고침되는 문제가 발생했다.  
`window.open()` 혹은 `location.href`를 이용한 기존 방식은 단일 파일 다운로드에는 문제없었지만, 다중 파일에서는 브라우저가 탭을 새로 열며 중단되었다.

![zip문제](https://github.com/user-attachments/assets/d9f5bd09-74c2-4df3-9256-6746f04a03a6)

**▶ 해결 방법**  
`JSZip` 라이브러리를 이용해 **모든 presigned URL을 Blob 형태로 불러와 ZIP으로 압축한 뒤 한 번에 다운로드**하도록 구조를 변경했다.  
이 방식은 새 탭이 열리지 않아 UX가 깔끔하고, 파일 수가 많아도 확장성이 높았다.  
단순한 문제 해결을 넘어, **유연하고 유지보수하기 쉬운 구조로 개선**할 수 있었다.

![zip문제해결](https://github.com/user-attachments/assets/79a53b34-132d-4533-9913-94bdfab57190)

---

### **지원자 이력서 다중 다운로드 문제 2 - CORS**

**▶ 문제 상황**  
로컬에서는 정상 작동하던 S3 업로드·다운로드가 EC2 배포 후 CORS 오류로 차단되었다.  
콘솔에는 “Access to fetch at ... has been blocked by CORS policy”가 출력되었다.

![zip문제2](https://github.com/user-attachments/assets/1bef99f6-3d26-4b5d-b21d-56ae980c5363)

**▶ 해결 방법**  
S3의 CORS 설정에 EC2 서버 주소(`http://3.322.xxx.xxx`)가 빠져 있던 것이 원인이었다.  
`Permissions > CORS configuration`에서 Origin을 추가하고, 허용 메서드를 `GET, PUT, POST, DELETE`로, 헤더는 `*`로 지정했다.  
캐시 초기화 후 재시도하니 정상 작동되었다.  
이후에는 배포 환경마다 Origin을 환경 변수로 관리하여 도메인 변경에도 대응할 수 있도록 개선했다.

![zip문제해결2](https://github.com/user-attachments/assets/69ce626d-9494-4268-92dc-d658a7d5a1be)

---

### **companyId 노출 문제**

**▶ 문제 상황**  
쿼리스트링을 통해 기업 ID가 노출되는 보안 문제가 있었다.

![companyId 노출 문제](https://github.com/user-attachments/assets/4bad24bf-970f-443a-92fd-b8286e57f13e)

**▶ 해결 방법**  
데이터를 body로 전달하는 대신, 컨트롤러에서 **`@AuthenticationPrincipal`을 통해 인증 정보를 직접 주입받는 구조**로 변경했다.  
이를 통해 URL 노출 없이 안전하게 인증 기반 데이터 접근이 가능해졌다.

![companyId 문제 해결](https://github.com/user-attachments/assets/09a83249-a27a-4222-9503-cf10ff7fc2a4)

---

### **API 기반 페이지를 Thymeleaf 동기 방식으로 전환한 구조 개선**

**▶ 문제 상황**  
초기에는 비동기 통신(`fetch`) 기반으로 등록·수정 기능을 구현했지만, 인증된 사용자만 접근하는 화면이었기에 REST 유지의 필요성이 낮았다.  
보안과 유지보수성을 위해 **Thymeleaf 동기 처리 방식으로 전환**하기로 결정했다.

![공고등록 수정 부분 리팩토링 문제](https://github.com/user-attachments/assets/fde32110-f209-47dc-9a74-b2b18268f950)

**▶ 해결 방법**  
- 컨트롤러를 REST API → View Controller 형태로 변경  
- 등록/수정 후 `redirect` 방식으로 UX 단순화  
- `@AuthenticationPrincipal`로 인증 정보를 직접 주입  

![공고등록 수정 부분 리팩토링 해결](https://github.com/user-attachments/assets/9528bb1f-b384-44af-860b-80d7e7910dd5)

---

## 9. QA 테스트

실제 서비스 검증을 위해 **입력값 유효성**, **비정상 시나리오 대응**, **예외 처리**, **UI 동작 일관성**, **데이터 저장 검증** 등 다양한 항목을 테스트했다.  
발견된 문제는 수정 후 재검증 과정을 거쳐 서비스의 안정성을 확보했다.

![QA 테스트](https://github.com/user-attachments/assets/a657c3a0-a7d9-4eec-a46e-5fa0ae068f3d)

---

## 10. 느낀점

AWS S3 업로드, Bootpay 결제 연동, Redis 캐싱, 스케줄러 자동 상태 변경 등 단순 CRUD를 넘어 **서비스 전체의 흐름을 설계하고 구현**했다.  
팀원 간의 코드 공유와 연결 구조 설계를 통해 기능의 통합성을 높였다.  

특히 캐시 적용 후 수정 시 `@CacheEvict` 누락 문제를 팀과 함께 분석해 해결하면서, 로그 기반 디버깅과 협업의 중요성을 체감했다.  
S3 `presigned URL` 적용 시 보안과 성능의 균형을 고민하며 **운영 환경 수준의 경험**을 쌓을 수 있었다.

프로젝트 중 Mapper XML 오류, Enum 매핑 문제, 중복 키 예외, 캐시 미반영 등 다양한 오류를 마주했지만  
팀 내에서 원인과 해결 방법을 공유하며, **“문제 해결을 넘어 시스템 안정성 강화”**의 경험으로 발전시켰다.

이번 프로젝트를 통해 느낀 점은, **유지보수가 쉬운 시스템은 결국 ‘서로의 코드를 이해하는 팀 문화’에서 나온다**는 것이다.  
하나의 기능을 완성하는 것보다, 서로의 로직이 자연스럽게 연결되는 구조를 만드는 일이 더 중요했다.  

결국 백엔드는 단순한 서버 로직이 아니라 **팀의 방향성과 데이터 흐름을 함께 설계하는 중심 역할**이었다.  
앞으로는 기능 구현을 넘어서, **소통과 협력 속에서 확장 가능한 구조를 설계하는 개발자**로 성장하고자 한다.

